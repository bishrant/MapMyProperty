{"version":3,"sources":["./node_modules/arcgis-js-api/core/requireUtils.js","./node_modules/arcgis-js-api/layers/graphics/OptimizedFeature.js","./node_modules/arcgis-js-api/layers/graphics/OptimizedFeatureSet.js","./node_modules/arcgis-js-api/layers/graphics/OptimizedGeometry.js","./node_modules/arcgis-js-api/layers/graphics/sources/FeatureLayerSource.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAO,CAAC,kCAAS,CAAC,OAAS,CAAC,wFAAa,CAAC,kFAAU,CAAC,8FAAgB,CAAC,mCAAC,oBAAoB,gBAAgB,sCAAsC,wGAAwG,wCAAwC,eAAe,iBAAiB,mBAAmB,sBAAsB,KAAK,EAAE,4BAA4B,YAAY,EAAE,kBAAkB,kEAAkE,sCAAsC,SAAS,EAAE,4CAA4C,uBAAuB;AAAA,oGAAC,C;;;;;;;;;;;ACxBpmB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAO,CAAC,kCAAS,CAAC,OAAS,CAAC,6HAAoC,CAAC,mCAAC,gBAAgB,sCAAsC,SAAS,EAAE,iBAAiB,oBAAoB,sCAAsC,+JAA+J,SAAS,GAAG,YAAY;AAAA,oGAAC,C;;;;;;;;;;;ACxBtY;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAO,CAAC,kCAAS,CAAC,OAAS,CAAC,mCAAC,cAAc,sCAAsC,SAAS,EAAE,iBAAiB,aAAa,8QAA8Q,SAAS,GAAG,YAAY;AAAA,oGAAC,C;;;;;;;;;;;ACxBja;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAO,CAAC,kCAAS,CAAC,OAAS,CAAC,mCAAC,cAAc,sCAAsC,SAAS,EAAE,iBAAiB,gBAAgB,mEAAmE,SAAS,GAAG,YAAY;AAAA,oGAAC,C;;;;;;;;;;;ACxBzN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAO,CAAC,kCAAS,CAAC,OAAS,CAAC,8IAA8C,CAAC,kIAAwC,CAAC,8HAAsC,CAAC,oIAAyC,CAAC,gIAAuC,CAAC,sFAAkB,CAAC,4FAAqB,CAAC,kGAAwB,CAAC,4FAAqB,CAAC,0GAA4B,CAAC,kGAAwB,CAAC,sIAA0C,CAAC,sGAA0B,CAAC,0IAA4C,CAAC,mCAAC,0CAA0C,cAAc,uCAAuC,MAAM,0BAA0B,uDAAuD,OAAO,6BAA6B,qBAAqB,uCAAuC,qCAAqC,uBAAuB,aAAa,GAAG,EAAE,EAAE,sCAAsC,SAAS,EAAE,kBAAkB,aAAa,8CAA8C,gCAAgC,2CAA2C,gCAAgC,mEAAmE,gDAAgD,eAAe,oEAAoE,cAAc,oEAAoE,EAAE,+BAA+B,0CAA0C,WAAW,mCAAmC,+FAA+F,SAAS,6DAA6D,YAAY,OAAO,mBAAmB,8DAA8D,oBAAoB,0CAA0C,EAAE,EAAE,8CAA8C,WAAW,mCAAmC,kGAAkG,SAAS,0BAA0B,eAAe,qCAAqC,YAAY,OAAO,mBAAmB,iEAAiE,oBAAoB,0CAA0C,EAAE,EAAE,sCAAsC,uCAAuC,wCAAwC,0BAA0B,gBAAgB,6BAA6B,wMAAwM,sFAAsF,uCAAuC,wBAAwB,2CAA2C,sFAAsF,uCAAuC,wBAAwB,iBAAiB,qDAAqD,IAAI,gQAAgQ,+CAA+C,0CAA0C,GAAG,0DAA0D,EAAE,EAAE,6CAA6C,WAAW,mCAAmC,8FAA8F,YAAY,SAAS,SAAS,0BAA0B,0BAA0B,oCAAoC,mBAAmB,sEAAsE,oBAAoB,0CAA0C,EAAE,EAAE,4CAA4C,WAAW,iBAAiB,EAAE,oCAAoC,mCAAmC,UAAU,IAAI,UAAU,UAAU,SAAS,sBAAsB,EAAE,qEAAqE,mCAAmC,WAAW,KAAK,oCAAoC,eAAe,iCAAiC,2BAA2B,OAAO,4DAA4D,EAAE,mBAAmB,2CAA2C,EAAE,+CAA+C,EAAE,yCAAyC,WAAW,mCAAmC,gCAAgC,EAAE,6CAA6C,WAAW,mCAAmC,oCAAoC,EAAE,0CAA0C,WAAW,mCAAmC,sCAAsC,EAAE,6CAA6C,WAAW,mCAAmC,wCAAwC,EAAE,uCAAuC,WAAW,mCAAmC,yCAAyC,EAAE,gDAAgD,WAAW,mCAAmC,iDAAiD,EAAE,uCAAuC,uCAAuC,QAAQ,0BAA0B,gBAAgB,gGAAgG,SAAS,SAAS,0DAA0D,GAAG,qDAAqD,EAAE,EAAE,2CAA2C,gCAAgC,oBAAoB,aAAa,0CAA0C,kCAAkC,8CAA8C,uCAAuC,sBAAsB,0BAA0B,gBAAgB,yGAAyG,kFAAkF,sIAAsI,+BAA+B,uGAAuG,wDAAwD,EAAE,EAAE,wCAAwC,WAAW,4FAA4F,6CAA6C,+BAA+B,yBAAyB,qCAAqC,EAAE,sDAAsD,yBAAyB,kBAAkB,EAAE,4CAA4C,0CAA0C,OAAO,ikBAAikB,kDAAkD,oCAAoC,gCAAgC,OAAO,yGAAyG,YAAY,QAAQ,wDAAwD,yGAAyG,OAAO,kFAAkF,OAAO,GAAG,qDAAqD,iEAAiE,qBAAqB,WAAW,0CAA0C,SAAS,4DAA4D,iBAAiB,8CAA8C,uFAAuF,wGAAwG,gBAAgB,YAAY;AAAA,oGAAC,C","file":"93.js","sourcesContent":["// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"./deprecate\",\"./Logger\",\"./promiseUtils\"],function(e,r,t,n,i){function o(e,r){return t.deprecatedFunction(s,\"when\",{moduleName:\"requireUtils\",replacement:\"Use `promiseUtils.create()` instead.\",version:\"4.10\",warnOnce:!0}),Array.isArray(r)?i.create(function(t){e(r,function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t(e)})}):o(e,[r]).then(function(e){return e[0]})}function c(e,r,t){return r.toAbsMid?r.toAbsMid(e):t.id.replace(/\\/[^\\/]*$/gi,\"/\")+e}Object.defineProperty(r,\"__esModule\",{value:!0});var s=n.getLogger(\"esri.core.requireUtils\");r.when=o,r.getAbsMid=c});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../core/tsSupport/extendsHelper\"],function(e,t,i){Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(e,t,i,o){void 0===e&&(e=null),void 0===t&&(t={}),this.localId=0,this.geohashIndexed=!1,this.geohashX=0,this.geohashY=0,this.geometry=e,t&&(this.attributes=t),i&&(this.centroid=i),null!=o&&(this.objectId=o)}return e}();t.default=o});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\"],function(e,t){Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1}return e}();t.default=i});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\"],function(e,t){Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.lengths=e,this.coords=t}return e}();t.default=i});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../../core/tsSupport/declareExtendsHelper\",\"../../../core/tsSupport/decorateHelper\",\"../../../core/tsSupport/assignHelper\",\"../../../core/tsSupport/generatorHelper\",\"../../../core/tsSupport/awaiterHelper\",\"../../../request\",\"../../../core/Error\",\"../../../core/Loadable\",\"../../../core/maybe\",\"../../../core/promiseUtils\",\"../../../core/urlUtils\",\"../../../core/accessorSupport/decorators\",\"../../../tasks/QueryTask\",\"../../../tasks/operations/queryAttachments\"],function(e,t,r,a,n,s,u,o,i,l,c,d,p,h,y,f){function m(e){return u(this,void 0,void 0,function(){var t;return s(this,function(r){return\"string\"==typeof e?(t=p.dataComponents(e),[2,t||{data:e}]):[2,d.create(function(t,r){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(p.dataComponents(a.result))},a.onerror=function(e){return r(e)}})]})})}Object.defineProperty(t,\"__esModule\",{value:!0});var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=\"feature-layer\",t}return r(t,e),t.prototype.load=function(e){var t=c.isSome(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(t)),this.when()},Object.defineProperty(t.prototype,\"queryTask\",{get:function(){var e=this.layer,t=e.parsedUrl,r=e.dynamicDataSource,a=e.gdbVersion;return new y({url:null!=r?t.path+\"?\"+p.objectToQuery(t.query):t.path,gdbVersion:a})},enumerable:!0,configurable:!0}),t.prototype.addAttachment=function(e,t){var r=this;return this.load().then(function(){var a=e.attributes[r.layer.objectIdField],s=r.layer.parsedUrl.path+\"/\"+a+\"/addAttachment\",u=n({f:\"json\"},r.layer.parsedUrl.query),i=r._getFormDataForAttachment(t,u);return o(s,{body:i}).then(function(e){return r._createFeatureEditResult(e.data.addAttachmentResult)}).catch(function(e){throw r._createAttachmentErrorResult(a,e)})})},t.prototype.updateAttachment=function(e,t,r){var a=this;return this.load().then(function(){var s=e.attributes[a.layer.objectIdField],u=a.layer.parsedUrl.path+\"/\"+s+\"/updateAttachment\",i=n({f:\"json\"},a.layer.parsedUrl.query,{attachmentId:t}),l=a._getFormDataForAttachment(r,i);return o(u,{body:l}).then(function(e){return a._createFeatureEditResult(e.data.updateAttachmentResult)}).catch(function(e){throw a._createAttachmentErrorResult(s,e)})})},t.prototype.applyEdits=function(e,t){return u(this,void 0,void 0,function(){var r,a,n,u,i,l,c,d,p,h,y,f,d,m,b,F,v,g;return s(this,function(s){switch(s.label){case 0:return[4,this.load()];case 1:s.sent(),r=e.addFeatures.map(this._serializeFeature,this),a=e.updateFeatures.map(this._serializeFeature,this),n=this._getFeatureIds(e.deleteFeatures),u=[],i=[],l=0,c=e.addAttachments,s.label=2;case 2:return l<c.length?(d=c[l],h=(p=u).push,[4,this._serializeAttachment(d)]):[3,5];case 3:h.apply(p,[s.sent()]),s.label=4;case 4:return l++,[3,2];case 5:y=0,f=e.updateAttachments,s.label=6;case 6:return y<f.length?(d=f[y],b=(m=i).push,[4,this._serializeAttachment(d)]):[3,9];case 7:b.apply(m,[s.sent()]),s.label=8;case 8:return y++,[3,6];case 9:return F={adds:u,updates:i,deletes:e.deleteAttachments.slice()},v={f:\"json\",adds:r.length?JSON.stringify(r):null,updates:a.length?JSON.stringify(a):null,deletes:n.length?n.join(\",\"):null,gdbVersion:t&&t.gdbVersion,rollbackOnFailure:t&&t.rollbackOnFailureEnabled,useGlobalIds:t&&t.globalIdUsed,attachments:JSON.stringify(F)},[4,o(this.layer.parsedUrl.path+\"/applyEdits\",{query:v,method:\"post\",responseType:\"json\"})];case 10:return g=s.sent(),[2,this._createEditsResult(g)]}})})},t.prototype.deleteAttachments=function(e,t){var r=this;return this.load().then(function(){var a=e.attributes[r.layer.objectIdField],s=r.layer.parsedUrl.path+\"/\"+a+\"/deleteAttachments\";return o(s,{query:n({f:\"json\"},r.layer.parsedUrl.query,{attachmentIds:t.join(\",\")}),method:\"post\",responseType:\"json\"}).then(function(e){return e.data.deleteAttachmentResults.map(r._createFeatureEditResult)}).catch(function(e){throw r._createAttachmentErrorResult(a,e)})})},t.prototype.queryAttachments=function(e,t){var r=this;void 0===t&&(t={});var a=this.layer.parsedUrl,s=a.path;return this.load().then(function(){var u=n({},t,{query:n({},a.query,{f:\"json\"}),responseType:\"json\"});if(!r.layer.get(\"capabilities.operations.supportsQueryAttachments\")){for(var i=e.objectIds,l=[],c=0,p=i;c<p.length;c++){var h=p[c],y=s+\"/\"+h+\"/attachments\";l.push(o(y,u))}return d.all(l).then(function(e){return i.map(function(t,r){return{parentObjectId:t,attachmentInfos:e[r].data.attachmentInfos}})}).then(function(e){return f.processAttachmentQueryResult(e,s)})}return r.queryTask.executeAttachmentQuery(e,u)})},t.prototype.queryFeatures=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.execute(e,t)})},t.prototype.queryFeaturesJSON=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.executeJSON(e,t)})},t.prototype.queryObjectIds=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.executeForIds(e,t)})},t.prototype.queryFeatureCount=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.executeForCount(e,t)})},t.prototype.queryExtent=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.executeForExtent(e,t)})},t.prototype.queryRelatedFeatures=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.executeRelationshipQuery(e,t)})},t.prototype._fetchService=function(e){return u(this,void 0,void 0,function(){var t,r;return s(this,function(a){switch(a.label){case 0:return t=this.layer.sourceJSON,t?(this.sourceJSON=t,[2]):[4,o(this.layer.parsedUrl.path,{query:n({f:\"json\"},this.layer.parsedUrl.query),responseType:\"json\",signal:e})];case 1:return r=a.sent().data,this.sourceJSON=r,[2]}})})},t.prototype._serializeFeature=function(e){var t=e.geometry,r=e.attributes;return c.isNone(t)?{attributes:r}:\"mesh\"===t.type||\"extent\"===t.type?null:{geometry:t.toJSON(),attributes:r}},t.prototype._serializeAttachment=function(e){return u(this,void 0,void 0,function(){var t,r,a,n,u,o,i,l,c;return s(this,function(s){switch(s.label){case 0:return t=e.feature,r=e.attachment,(a=r.globalId,n=r.name,u=r.contentType,o=r.data,i=r.uploadId,l={globalId:a,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null},t&&(l.parentGlobalId=\"attributes\"in t?t.attributes&&t.attributes[this.layer.globalIdField]:t.globalId),i)?(l.uploadId=i,[3,3]):[3,1];case 1:return o?[4,m(o)]:[3,3];case 2:c=s.sent(),l.contentType=c.mediaType,l.data=c.data,o instanceof File&&(l.name=o.name),s.label=3;case 3:return n&&(l.name=n),u&&(l.contentType=u),[2,l]}})})},t.prototype._getFeatureIds=function(e){var t=e[0];return t?\"objectId\"in t?this._getIdsFromFeatureIdentifier(e):this._getIdsFromFeatures(e):[]},t.prototype._getIdsFromFeatures=function(e){var t=this.layer.objectIdField;return e.map(function(e){return e.attributes&&e.attributes[t]})},t.prototype._getIdsFromFeatureIdentifier=function(e){return e.map(function(e){return e.objectId})},t.prototype._createEditsResult=function(e){var t=e.data,r=e.data&&e.data.attachments;return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:r&&r.addResults?r.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:r&&r.updateResults?r.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:r&&r.deleteResults?r.deleteResults.map(this._createFeatureEditResult,this):[]}},t.prototype._createFeatureEditResult=function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new i(\"feature-layer-source:edit-failure\",t.description,{code:t.code}):null}},t.prototype._createAttachmentErrorResult=function(e,t){var r=t.details.messages&&t.details.messages[0]||t.message,a=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new i(\"feature-layer-source:attachment-failure\",r,{code:a})}},t.prototype._getFormDataForAttachment=function(e,t){var r=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(r)for(var a in t){var n=t[a];null!=n&&(r.set?r.set(a,n):r.append(a,n))}return r},a([h.property()],t.prototype,\"type\",void 0),a([h.property({constructOnly:!0})],t.prototype,\"layer\",void 0),a([h.property({readOnly:!0,dependsOn:[\"layer.parsedUrl\",\"layer.gdbVersion\",\"layer.dynamicDataSource\"]})],t.prototype,\"queryTask\",null),t=a([h.subclass(\"esri.layers.graphics.sources.FeatureLayerSource\")],t)}(h.declared(l));t.default=b});"],"sourceRoot":"webpack:///"}